{
  "id": "{{service.name}}",

  "cpus": {{elastic-scheduler.cpu}},
  "mem": {{elastic-scheduler.ram}},
  "disk": {{elastic-scheduler.disk}},
  "instances": {{elastic-scheduler.instances}},

  "portDefinitions": [
    {
      "port":{{elasticsearch.gui-port}},
      "protocol":"tcp",
      "name":"gui",
      "labels":{}
    }
  ],

  "requirePorts": true,

  "healthChecks": [
    {
      "path": "/",
      "portName": "gui",
      "protocol": "HTTP",
      "gracePeriodSeconds": {{elastic-scheduler.healthcheck-startdelay}},
      "intervalSeconds": {{elastic-scheduler.healthcheck-interval}},
      "timeoutSeconds": {{elastic-scheduler.healthcheck-timeout}},
      "maxConsecutiveFailures": {{elastic-scheduler.healthcheck-maxfail}}
    }
  ],

  "cmd": "/tmp/start-scheduler.sh
  --webUiPort $PORT0
  --useIpAddress true
  --zookeeperMesosUrl {{mesos.master}}
  --zookeeperMesosTimeout {{mesos.timeout}}
  --frameworkRole '{{elasticsearch.framework-role}}'
  --frameworkFailoverTimeout {{elasticsearch.failover-timeout}}
  --executorForcePullImage {{elasticsearch.force-pull-image}}
  --elasticsearchCpu {{elastic-worker.cpu}}
  --elasticsearchRam {{elastic-worker.ram}}
  --elasticsearchDisk {{elastic-worker.disk}}
  --elasticsearchNodes {{elastic-worker.instances}}
  --elasticsearchDockerImage {{elastic-worker.image}}
  {{^elasticsearch.cluster-name}}--elasticsearchClusterName {{service.name}}{{/elasticsearch.cluster-name}}
  {{#elasticsearch.cluster-name}}--elasticsearchClusterName {{elasticsearch.cluster-name}}{{/elastic-worker.cluster-name}}
  {{^elasticsearch.framework-name}}--frameworkName {{service.name}}{{/elasticsearch.framework-name}}
  {{#elasticsearch.framework-name}}--frameworkName {{elasticsearch.framework-name}}{{/elasticsearch.framework-name}}
  {{^elastic-worker.name}}--executorName {{service.name}}-child{{/elastic-worker.name}}
  {{#elastic-worker.name}}--executorName {{elastic-worker.name}}{{/elastic-worker.name}}
  {{#elastic-worker.storage-driver}}--externalVolumeDriver {{elastic-worker.storage-driver}}{{/elastic-worker.storage-driver}}
  {{#elastic-worker.settings-location}}--elasticsearchSettingsLocation {{elastic-worker.settings-location}}{{/elastic-worker.settings-location}}",

  "env": {
    "JAVA_OPTS": "{{elastic-scheduler.java-heap}}"
  },

  "container": {
    "type": "DOCKER",
    "docker": {
      "network": "HOST",
      "image": "{{resource.assets.container.docker.elasticsearch-scheduler}}",
      "forcePullImage": {{elasticsearch.force-pull-image}}
    }
  },

  "labels": {
    "DCOS_PACKAGE_FRAMEWORK_NAME": "{{service.name}}",
    "DCOS_PACKAGE_NAME": "{{service.name}}"
  }
}
