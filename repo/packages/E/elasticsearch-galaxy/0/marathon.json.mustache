{
  "id": "{{service.name}}",

  "cpus": {{elasticsearch.scheduler.cpu}},
  "mem": {{elasticsearch.scheduler.ram}},
  "disk": {{elasticsearch.scheduler.disk}},
  "instances": {{elasticsearch.scheduler.instances}},

  "portDefinitions": [
    {
      "port":{{elasticsearch.port}},
      "protocol":"tcp",
      "name":"webui",
      "labels":{}
    },
    {
      "port":0,
      "protocol":"tcp",
      "name":"master",
      "labels":{"VIP_0":"1.1.1.1:{{elasticsearch.master-port}}"}
    },
    {
      "port":0,
      "protocol":"tcp",
      "name":"client",
      "labels":{"VIP_0":"1.1.1.1:{{elasticsearch.client-port}}"}
    }
  ],

  "requirePorts": true,

  "healthChecks": [
    {
      "path": "/",
      "portName": "webui",
      "protocol": "HTTP",
      "gracePeriodSeconds": {{elasticsearch.scheduler.healthcheck-startdelay}},
      "intervalSeconds": {{elasticsearch.scheduler.healthcheck-interval}},
      "timeoutSeconds": {{elasticsearch.scheduler.healthcheck-timeout}},
      "maxConsecutiveFailures": {{elasticsearch.scheduler.healthcheck-maxfail}}
    }
  ],

  "cmd": "/tmp/start-scheduler.sh --webUiPort $PORT0 --useIpAddress true --zookeeperMesosUrl {{mesos.master}} --zookeeperMesosTimeout {{elasticsearch.zookeeper-mesos-timeout}} --frameworkFailoverTimeout {{elasticsearch.failover-timeout}} --frameworkRole '{{elasticsearch.framework-role}}' --executorForcePullImage {{elasticsearch.force-pull-image}} --elasticsearchDockerImage {{elasticsearch.executor.image}} --elasticsearchNodes {{elasticsearch.executor.instances}} --elasticsearchCpu {{elasticsearch.executor.cpu}} --elasticsearchDisk {{elasticsearch.executor.disk}} --elasticsearchRam {{elasticsearch.executor.ram}} {{^elasticsearch.framework-name}}--frameworkName {{service.name}}{{/elasticsearch.framework-name}} {{#elasticsearch.framework-name}}--frameworkName {{elasticsearch.framework-name}}{{/elasticsearch.framework-name}} {{^elasticsearch.executor.name}}--executorName {{service.name}}-exec{{/elasticsearch.executor.name}} {{#elasticsearch.executor.name}}--executorName {{elasticsearch.executor.name}}{{/elasticsearch.executor.name}} {{^elasticsearch.executor.cluster-name}}--elasticsearchClusterName {{service.name}}{{/elasticsearch.executor.cluster-name}} {{#elasticsearch.executor.cluster-name}}--elasticsearchClusterName {{elasticsearch.executor.cluster-name}}{{/elasticsearch.executor.cluster-name}} {{#elasticsearch.executor.storage-driver}}--externalVolumeDriver {{elasticsearch.executor.storage-driver}}{{/elasticsearch.executor.storage-driver}} {{#elasticsearch.executor.settings-location}}--elasticsearchSettingsLocation {{elasticsearch.executor.settings-location}}{{/elasticsearch.executor.settings-location}}",

  "env": {
    "JAVA_OPTS": "{{elasticsearch.scheduler.java-heap}}"
  },

  "container": {
    "type": "DOCKER",
    "docker": {
      "network": "HOST",
      "image": "{{resource.assets.container.docker.elasticsearch-scheduler}}",
      "forcePullImage": {{elasticsearch.force-pull-image}}
    }
  },

  "labels": {
    "DCOS_PACKAGE_FRAMEWORK_NAME": "{{service.name}}",
    "DCOS_PACKAGE_NAME": "{{service.name}}"
  }
}
